# .github > workflows > deploy.yml
name: Deploy

on:
   push:
      branches:
         - main

jobs:
   deploy:
      runs-on: ubuntu-latest
      steps:
         - uses: actions/checkout@v4
           with:
              fetch-depth: 0
         - uses: actions/setup-node@v4
           with:
              node-version: 20
              cache: npm
         - run: npm install --frozen-lockfile

         - name: Build
           run: npm run build

         - name: Deploy
            # å°†æ„å»ºäº§ç‰© commit åˆ°ä¸€ä¸ªåˆ†æ”¯ä¸Šï¼Œç”¨äºå‘å¸ƒé™æ€ç«™ç‚¹èµ„æº
            # https://github.com/peaceiris/actions-gh-pages
            #ä¸è¦å°†peaceirisæ”¹ä¸ºè‡ªå·±çš„ä»“åº“åï¼Œæˆ‘å•çº¯çš„ä»¥ä¸ºè¿™ä¸ªéœ€è¦æ”¹æˆè‡ªå·±çš„ä»“åº“åï¼Œéƒ¨ç½²ä¸Šå»å°±buildå¤±è´¥äº†ï¼Œéœ€å¼•ç”¨è¯¥ä»“åº“çš„é…ç½®
           uses: peaceiris/actions-gh-pages@v3
           with:
              # Github ä¼šåœ¨ workflow ä¸­è‡ªåŠ¨ç”Ÿæˆ GIHUBT_TOKENï¼Œç”¨äºè®¤è¯ workflow çš„è¿è¡Œ
              github_token: ${{ secrets.GITHUB_TOKEN }}
              # é™æ€èµ„æºç›®å½•è®¾ç½®
              publish_dir: .vitepress/dist
              # é»˜è®¤å‘å¸ƒåˆ° gh-pages åˆ†æ”¯ä¸Šï¼Œå¯ä»¥æŒ‡å®šç‰¹å®šçš„å‘å¸ƒåˆ†æ”¯ï¼ˆä¸èƒ½é€‰æ‹‰å–ä»£ç çš„åˆ†æ”¯ï¼‰
              publish_branch: gh-pages
              full_commit_message: ${{ github.event.head_commit.message }}



#name: Deploy VitePress site to Pages
#
#on:
#  push:
#    # æ¨é€ä»»æ„tagsæˆ–è€…mainåˆ†æ”¯æ¨é€çš„æ—¶å€™è§¦å‘ä»»åŠ¡
#    tags:
#      - '*'
#    branches:
#      - main
#
#  workflow_dispatch:
#
#jobs:
#  deploy-and-sync:
#    runs-on: ubuntu-latest
#    steps:
#      - name: Checkout ğŸ›ï¸
#        uses: actions/checkout@v4
#        with:
#          ref: 'main'
#
#      - name: Install yarn
#        run: corepack enable
#
#      - uses: actions/setup-node@v3
#        with:
#          node-version: '18'
#          cache: 'yarn'
#
#      - name: Install dependencies
#        run: yarn install
#
#      - name: Build Site
#        run: npm run docs:build
#
#      # å°†æ–‡æ¡£äº§ç‰©æäº¤åˆ°gh-pagesåˆ†æ”¯
#      - name: Deploy for Github ğŸš€
#        uses: JamesIves/github-pages-deploy-action@v4.4.1
#        with:
#          branch: gh-pages
#          folder: .vitepress/dist
#          # enable single-commit to reduce the repo size
#          single-commit: true
#          clean: true
