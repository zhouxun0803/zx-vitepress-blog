import{_ as i,c as a,o as t,a9 as h}from"./chunks/framework.CKUMok-g.js";const g=JSON.parse('{"title":"配置SSH免密登录服务器","description":"","frontmatter":{"title":"配置SSH免密登录服务器","date":"2022-02-12T00:00:00.000Z","tags":["技术笔记","技术教程"],"categories":["技术笔记"],"head":[["script",{},"!function(p){\\"use strict\\";!function(t){var s=window,e=document,i=p,c=\\"\\".concat(\\"https:\\"===e.location.protocol?\\"https://\\":\\"http://\\",\\"sdk.51.la/js-sdk-pro.min.js\\"),n=e.createElement(\\"script\\"),r=e.getElementsByTagName(\\"script\\")[0];n.type=\\"text/javascript\\",n.setAttribute(\\"charset\\",\\"UTF-8\\"),n.async=!0,n.src=c,n.id=\\"LA_COLLECT\\",i.d=n;var o=function(){s.LA.ids.push(i)};s.LA?s.LA.ids&&o():(s.LA=p,s.LA.ids=[],o()),r.parentNode.insertBefore(n,r)}()}({\\"id\\":\\"Jgmg5avjAUvoyePS\\",\\"ck\\":\\"Jgmg5avjAUvoyePS\\",\\"hashMode\\":true});"]]},"headers":[],"relativePath":"technology/learn/ssh-no-pwd-login.md","filePath":"technology/learn/ssh-no-pwd-login.md","lastUpdated":1769849351000}'),e={name:"technology/learn/ssh-no-pwd-login.md"};function l(n,s,p,k,r,d){return t(),a("div",{"data-pagefind-body":!0,"data-pagefind-meta":"date:1644624000000"},[...s[0]||(s[0]=[h(`<h1 id="本地配置ssh免密远程登录服务器" tabindex="-1">本地配置SSH免密远程登录服务器 <a class="header-anchor" href="#本地配置ssh免密远程登录服务器" aria-label="Permalink to “本地配置SSH免密远程登录服务器”">​</a></h1><p>最近服务器从阿里云换到了腾讯云，需要把服务进行一次整体的迁移</p><p>为了方便资源的部署，需要配置一下SSH的免密登录，避免频繁的输入密码</p><h2 id="取得本地公钥" tabindex="-1">取得本地公钥 <a class="header-anchor" href="#取得本地公钥" aria-label="Permalink to “取得本地公钥”">​</a></h2><p>先查看本地是否存在<code>id_rsa.pub</code>文件</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh</span></span></code></pre></div><p>不存在可以通过如下指令创建（一路回车即可）</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span></span></code></pre></div><h2 id="服务器添加信任" tabindex="-1">服务器添加信任 <a class="header-anchor" href="#服务器添加信任" aria-label="Permalink to “服务器添加信任”">​</a></h2><h3 id="上传公钥" tabindex="-1">上传公钥 <a class="header-anchor" href="#上传公钥" aria-label="Permalink to “上传公钥”">​</a></h3><p>将本地公钥上传到远程服务器</p><ul><li>其中 <code>$host</code>换成目标服务器绑定的 <strong>域名</strong> 或 <strong>IP</strong> 即可</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:~/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@baidu.com:~/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@39.156.66.18:~/</span></span></code></pre></div><h3 id="添加信任" tabindex="-1">添加信任 <a class="header-anchor" href="#添加信任" aria-label="Permalink to “添加信任”">​</a></h3><p>先检查服务器上是<code>root</code>用户是否存在<code>.ssh</code>目录</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$host </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ls -al&quot;</span></span></code></pre></div><p>不存在则运行上述一样的方式进行创建</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$host </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ssh-keygen -t rsa&quot;</span></span></code></pre></div><p>添加信任</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$host </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cat ~/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys&quot;</span></span></code></pre></div><h2 id="重启ssh" tabindex="-1">重启ssh <a class="header-anchor" href="#重启ssh" aria-label="Permalink to “重启ssh”">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$host </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;service sshd restart&quot;</span></span></code></pre></div><h2 id="免密登录root" tabindex="-1">免密登录root <a class="header-anchor" href="#免密登录root" aria-label="Permalink to “免密登录root”">​</a></h2><p>配置完成后即可进行免密登录</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$host</span></span></code></pre></div>`,25)])])}const c=i(e,[["render",l]]);export{g as __pageData,c as default};
